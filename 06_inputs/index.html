<!DOCTYPE html>
<html lang="en">

<title>PS70: Intro to Digital Fabrication </title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="../style.css" rel="stylesheet">


<nav class="navbar navbar-expand-sm navbar-dark" style="background-color: #FEDCDB; color: #D8E57;">
  <div style="align-items: center; justify-content: center;" class="container-fluid">
    <div class="flexrow">
      <h2 class="nav-title">PS70 Fall 2024</h2>
    </div>
    <div class="navbar-nav">
      <h4><a class="nav-link" href="../index.html">Home</a></h4>
      <h4><a class="nav-link" href="../about.html">About</a></h4>
    </div>
  </div>
</nav>

<body>
<xmp style="display:none;">
<div class="textcontainer">
<p class="margin">   </p>

<h3>Week 6: Electronic Inputs</h3>
<h4>Assignment 1: Capacitive Sensor</h4>

<p class="margin"></p>

During class, our group was assigned rotation angle as the quantity we had to measure using a capacitive sensor. We decided to use two plates acting as a capacitor: one plate fixed in place, and another plate rotating along the edge of a circular platform. The idea was that as the angle changed, the overlap between the plates would change, which would change the capacitance.

<p class="margin"></p>

To build the setup, we taped one plate to a small upright piece of wood and used clay to position it in front of a motor. Then we laser-cut a small circular cam with a hole in the center that fit onto the motor’s axle. We attached the second plate to the edge of this circle using clay so that when the motor rotated, the plate would sweep around in an arc.

<p class="margin"></p>

<img src="./capacitive_sensor_setup.jpeg" alt="capacitive sensor setup" width="400" height="400">

<p class="margin"></p>

<p class="margin"></p>
<video width="360" height="640" autoplay muted>
  <source src="capacitive_sensor_vid.mp4" type="video/mp4">
Your browser does not support the video tag.
</video>
<p class="margin"></p>

We hooked up alligator clips to each plate and connected them to the appropriate wires and pins on the ESP32. The code for the motor was very simple. We just needed the motor to turn continuously.

<p class="margin"></p>

<p class="margin"></p>

<img src="./schematic.jpg" alt="capacitive sensor setup" width="400" height="400">

<p class="margin"></p>

After everything was running, we measured capacitance at different rotation angles and plotted the results. The x-axis is the angle (from 0 degrees to 315 degrees) and the y-axis is the measured capacitance. The plot did not come out as clean as we expected. In theory, the capacitance should be lowest around 180 degrees and then increase steadily as the angle moves toward 360/0 degrees, reaching around 90000 (in the units we were using). Instead, our data went up and down in a less predictable way.

<p class="margin"></p>

<img src="./graph1.jpg" alt="capacitive sensor setup" width="640" height="360">

<p class="margin"></p>

This is probably due to systematic error. We ended up hand-holding the rotating plate at each angle because we could not find tape at the time, so our positioning was not very consistent. It is likely that this human error is why the measured capacitance did not match the ideal trend we expected for the capacitive sensor.

<p class="margin"></p>

<h4>Assignment 2: Photoresistor-Based Light Sensor</h4>

<p class="margin"></p>

<p>
For this assignment, I used a photoresistor (light-dependent resistor, LDR) as an input sensor to measure ambient light levels. 
The photoresistor was configured in a voltage divider circuit and connected to the microcontroller’s analog input. 
Based on the measured light level, an LED was used as an output device that automatically turns on in low-light conditions and turns off when the environment is bright.
</p>

<p>
The program continuously reads the analog value from the photoresistor and compares it to a predefined threshold. 
When the measured value drops below the threshold, indicating low light, the LED is turned on. 
When the value rises above the threshold, the LED is turned off.
</p>

<p class="margin"></p>

<h5>Code Implementation</h5>

<p>
The following code was used to read the photoresistor and control the LED. 
Sensor data is printed to the Serial Monitor for calibration and debugging purposes.
</p>

<pre><code>
const int LED_PIN = D7;      // LED output pin
const int LDR_PIN = D0;      // Photoresistor analog input

int sensorValue = 0;
const int threshold = 1800; // Light threshold

void setup() {
  pinMode(LED_PIN, OUTPUT);
  Serial.begin(115200);
}

void loop() {
  sensorValue = analogRead(LDR_PIN);
  Serial.println(sensorValue);

  if (sensorValue < threshold) {
    digitalWrite(LED_PIN, HIGH);  // Turn LED on in low light
  } else {
    digitalWrite(LED_PIN, LOW);   // Turn LED off in bright light
  }
}
</code></pre>

<p class="margin"></p>

<h5>Demonstration</h5>

<p>
The video below shows the photoresistor responding to changes in light levels. 
As the ambient light decreases, the LED turns on automatically.
</p>

<p class="margin"></p>

<video width="640" height="360" autoplay muted loop>
  <source src="photoresistor_vid.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>

<p class="margin"></p>

<h5>Sensor Schematic</h5>

<p>
The schematic below shows the photoresistor wired in a voltage divider configuration with a fixed resistor.
The midpoint of the divider is connected to the analog input of the microcontroller.
</p>

<p class="margin"></p>

<img src="./photo_schematic.jpeg" alt="Photoresistor schematic" width="400" height="400">

<p class="margin"></p>

<h5>Physical Circuit</h5>

<p>
The image below shows the physical implementation of the circuit on a breadboard, including the photoresistor, resistor, LED, and microcontroller connections.
</p>

<p class="margin"></p>

<img src="./photo_circuit.jpeg" alt="Photoresistor circuit on breadboard" width="400" height="400">

<p class="margin"></p>

<h5>Sensor Calibration and Data Analysis</h5>

<p>
To calibrate the photoresistor, I used my phone’s flashlight at five different brightness settings (0–4) while keeping the phone at a constant distance from the sensor.
For each brightness level, I observed the analog readings in the Serial Plotter and recorded an average value.
</p>

<p>
These values were then plotted on a graph to analyze the relationship between light intensity and the sensor output.
As shown in the graph below, the relationship between the photoresistor’s resistance and light intensity is approximately linear.
</p>

<p class="margin"></p>

<img src="./photo_graph.jpg" alt="Photoresistor calibration graph" width="640" height="360">

<p class="margin"></p>

<h4>Assignment 3: Create a file for the CNC machine</h4>
<p class = "margin"></p>
<a download href='./CNC.dxf'>Download my DXF File </a> 
<p class = "margin"></p>

</div>
</xmp>
</body>

<script src="../strapdown.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" ></script>

</html>